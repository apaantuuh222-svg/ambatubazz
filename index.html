<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>HP MU GW SITA YE</title>
<style>
  html, body {
    margin: 0; padding: 0; height: 100%;
    background-color: #b20000;
    color: white;
    font-family: 'Arial Black', Arial, sans-serif;
    overflow: hidden;
    user-select: none;
  }
  .container {
    height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    padding: 10px;
  }
  .main-text {
    font-size: 5vw;
    font-weight: 900;
    margin-bottom: 20px;
  }
  .sub-text {
    font-size: 2vw;
    margin-bottom: 20px;
  }
  .timer {
    font-size: 4vw;
    font-weight: 700;
    margin-bottom: 20px;
    letter-spacing: 2px;
  }
  input[type="text"], input[type="number"], textarea, select {
    font-size: 1.6vw;
    padding: 8px 10px;
    border-radius: 5px;
    border: none;
    outline: none;
    text-align: center;
    width: 220px;
    box-sizing: border-box;
    background-color: #660000;
    color: white;
    margin: 5px 0;
  }
  textarea {
    resize: vertical;
    height: 80px;
  }
  select {
    cursor: pointer;
  }
  button {
    font-size: 1.6vw;
    padding: 8px 20px;
    margin-left: 15px;
    border: none;
    border-radius: 5px;
    background-color: #660000;
    color: white;
    cursor: pointer;
  }
  button:hover {
    background-color: #990000;
  }
  .button-row {
    margin-top: 15px;
  }
  #adminPanel {
    display: none;
    position: fixed;
    top: 5vh;
    left: 50%;
    transform: translateX(-50%);
    background-color: #330000;
    border: 3px solid #990000;
    padding: 20px;
    width: 420px;
    color: white;
    z-index: 10000;
    border-radius: 10px;
    max-height: 90vh;
    overflow-y: auto;
    font-size: 1.5vw;
  }
  #adminPanel h2 {
    margin-top: 0;
    text-align: center;
  }
  #adminPanel label {
    display: block;
    margin-top: 10px;
    font-weight: 700;
    text-align: left;
  }
  #roleDisplay {
    margin-top: 10px;
    font-weight: 700;
    text-align: center;
    font-size: 1.6vw;
  }
  #userInbox, #adminInbox {
    margin-top: 20px;
    background-color: #550000;
    border: 2px solid #990000;
    border-radius: 8px;
    padding: 10px;
    max-height: 200px;
    overflow-y: auto;
    font-size: 1.3vw;
    text-align: left;
  }
  #userInbox h3, #adminInbox h3 {
    margin: 0 0 10px 0;
    text-align: center;
    font-weight: 900;
  }
  .message, .request-item {
    background-color: #880000;
    margin-bottom: 8px;
    padding: 6px 8px;
    border-radius: 5px;
    white-space: pre-wrap;
    cursor: default;
  }
  .request-item {
    cursor: pointer;
  }
  .request-item:hover {
    background-color: #aa0000;
  }
  #requestKeyForm {
    margin-top: 15px;
  }
  #requestKeyForm input[type="text"] {
    width: calc(100% - 130px);
    margin-right: 10px;
  }
</style>
</head>
<body>
<div class="container">
<img src="avatar.png" alt="Foto" style="max-width: 150px; border-radius: 15px; margin-bottom: 20px; box-shadow: 0 0 10px #660000;" />	
  <div class="main-text">HP MU GW AMBIL ALIH ☠️</div>
  <div class="sub-text">chat nomor ini untuk mendapatkan key</div>
  <div class="sub-text">085********</div>
  <div class="sub-text">nama permintaan pembebasan harus sama dengan nama dana kamu</div>
  <div class="timer" id="timer">03:00:00</div>
<audio id="alarmSound" loop autoplay>
  <source src="ambatukam.ogg" type="audio/ogg" />
  Browsermu tidak mendukung audio.
</audio>

<script>
  const alarmSound = document.getElementById('alarmSound');

  // Coba mainkan suara saat load (banyak browser sekarang butuh user interaction dulu, tapi kita coba autoplay)
  alarmSound.play().catch(() => {
    // kalau autoplay diblok, kita bisa suruh user klik sesuatu dulu, tapi di sini kita abaikan
  });

  // Saat tab/window tidak aktif (user pindah tab atau keluar)
  document.addEventListener('visibilitychange', () => {
    if (document.hidden) {
      alarmSound.pause();
    } else {
      alarmSound.play();
    }
  });

  // Saat window ditutup/direload, otomatis suara berhenti karena halaman unload
</script>  
  <div>
    <input type="text" id="keyInput" placeholder="Masukkan KEY" autocomplete="off" />
    <button id="submitKey">Kirim</button>
  </div>

  <form id="requestKeyForm" autocomplete="off">
    <input type="text" id="requestUserName" placeholder="Masukkan nama untuk minta key" required autocomplete="off" />
    <button type="submit" id="requestKeyBtn">Minta Key</button>
  </form>

  <div id="userInbox">
    <h3>Inbox Pesan dari Admin</h3>
    <div id="messagesContainer">Tidak ada pesan.</div>
  </div>

  <div class="button-row">
    <button id="adminAccess">{Akses admin}</button>
  </div>
</div>

<div id="adminPanel">
  <h2>Admin Panel</h2>
  <div id="roleDisplay">Role: <span id="roleName">User</span></div>

  <label for="timerInput">Edit Timer:</label>
  <div style="display:flex; gap:8px; align-items:center; margin-bottom:10px;">
    <input type="number" id="timerHours" min="0" max="99" placeholder="Jam" />
    <input type="number" id="timerMinutes" min="0" max="59" placeholder="Menit" />
    <input type="number" id="timerSeconds" min="0" max="59" placeholder="Detik" />
  </div>

  <label for="userKeyInput">Edit Key User:</label>
  <input type="text" id="userKeyInput" autocomplete="off" />

  <label for="adminKeyInput">Edit Key Admin:</label>
  <input type="text" id="adminKeyInput" autocomplete="off" />

  <label for="adminMessageInput">Kirim Pesan ke User:</label>
  <textarea id="adminMessageInput" placeholder="Tulis pesan..."></textarea>
  <button id="sendMessageBtn">Kirim Pesan</button>

  <div id="adminInbox">
    <h3>Inbox Permintaan Key dari User (Klik untuk bebaskan)</h3>
    <div id="adminMessagesContainer">Tidak ada permintaan.</div>
  </div>

  <button id="applyChanges">Apply Changes</button>
  <button id="switchRoleBtn">Switch Role</button>
  <button id="logoutAdminBtn">Logout Admin</button>
  <button id="closeAdminBtn">Close Admin Panel</button>
</div>

<script>
  let timeLeft = 3 * 3600; // 3 jam default (detik)
  let userKey = '555';
  let adminKey = 'admin-maafkan-aku';
  let isAdmin = false;
  let hasAdminAccess = false;
  let isUnlocked = false;
  let timerInterval;

  const userMessages = [];
  const adminRequests = [];

  const timerDisplay = document.getElementById('timer');
  const keyInput = document.getElementById('keyInput');
  const submitKey = document.getElementById('submitKey');
  const adminAccess = document.getElementById('adminAccess');
  const adminPanel = document.getElementById('adminPanel');
  const timerHours = document.getElementById('timerHours');
  const timerMinutes = document.getElementById('timerMinutes');
  const timerSeconds = document.getElementById('timerSeconds');
  const userKeyInput = document.getElementById('userKeyInput');
  const adminKeyInput = document.getElementById('adminKeyInput');
  const applyChanges = document.getElementById('applyChanges');
  const switchRoleBtn = document.getElementById('switchRoleBtn');
  const closeAdminBtn = document.getElementById('closeAdminBtn');
  const logoutAdminBtn = document.getElementById('logoutAdminBtn');
  const roleName = document.getElementById('roleName');
  const messagesContainer = document.getElementById('messagesContainer');
  const requestKeyForm = document.getElementById('requestKeyForm');
  const requestUserName = document.getElementById('requestUserName');
  const adminMessagesContainer = document.getElementById('adminMessagesContainer');
  const adminMessageInput = document.getElementById('adminMessageInput');
  const sendMessageBtn = document.getElementById('sendMessageBtn');

  function formatTime(seconds) {
    let h = Math.floor(seconds / 3600);
    let m = Math.floor((seconds % 3600) / 60);
    let s = seconds % 60;
    return [h, m, s].map(v => String(v).padStart(2, '0')).join(':');
  }

  function updateUserInbox() {
    if(userMessages.length === 0) {
      messagesContainer.textContent = 'Tidak ada pesan.';
      return;
    }
    messagesContainer.innerHTML = '';
    userMessages.forEach((msg, idx) => {
      const div = document.createElement('div');
      div.className = 'message';
      div.textContent = `[Pesan #${idx+1}]: ${msg}`;
      messagesContainer.appendChild(div);
    });
  }

  function updateAdminInbox() {
    if(adminRequests.length === 0) {
      adminMessagesContainer.textContent = 'Tidak ada permintaan.';
      return;
    }
    adminMessagesContainer.innerHTML = '';
    adminRequests.forEach(({name, time}, idx) => {
      const div = document.createElement('div');
      div.className = 'request-item';
      div.textContent = `${idx+1}. ${name} (permintaan: ${time})`;
      div.title = 'Klik untuk bebaskan user ini';
      div.onclick = () => {
        if(confirm(`Bebaskan user "${name}" dari kunci?`)) {
          bebaskanUserByName(name);
        }
      };
      adminMessagesContainer.appendChild(div);
    });
  }

  function bebaskanUserByName(name) {
    for(let i = adminRequests.length -1; i >= 0; i--) {
      if(adminRequests[i].name.toLowerCase() === name.toLowerCase()) {
        adminRequests.splice(i,1);
      }
    }
    isUnlocked = true;
    timeLeft = Infinity;
    keyInput.disabled = false;
    submitKey.disabled = false;
    updateAdminInbox();
    alert(`User "${name}" telah dibebaskan oleh admin.`);
    timerDisplay.textContent = '∞';
    clearInterval(timerInterval);
    requestKeyForm.style.display = 'none';
  }

  function updateTimer() {
    if (isUnlocked) {
      timerDisplay.textContent = '∞';
      clearInterval(timerInterval);
      keyInput.disabled = false;
      submitKey.disabled = false;
      requestKeyForm.style.display = 'none';
      return;
    }

    if(timeLeft <= 0) {
      clearInterval(timerInterval);
      keyInput.disabled = true;
      submitKey.disabled = true;
      requestKeyForm.style.display = 'none';
      timerDisplay.textContent = '00:00:00';
      return;
    }

    timerDisplay.textContent = formatTime(timeLeft);
    timeLeft--;
  }

  function startTimer() {
    clearInterval(timerInterval);
    timerInterval = setInterval(updateTimer, 1000);
  }

  function loadAdminInputs() {
    if (isUnlocked || timeLeft === Infinity) {
      timerHours.value = '';
      timerMinutes.value = '';
      timerSeconds.value = '';
    } else {
      timerHours.value = Math.floor(timeLeft / 3600);
      timerMinutes.value = Math.floor((timeLeft % 3600) / 60);
      timerSeconds.value = timeLeft % 60;
    }
    userKeyInput.value = userKey;
    adminKeyInput.value = adminKey;
    adminMessageInput.value = '';
  }

  function updateRoleDisplay() {
    roleName.textContent = isAdmin ? 'Admin' : 'User';
    if (isAdmin) {
      adminPanel.style.borderColor = '#00cc00';
      adminPanel.style.backgroundColor = '#003300';
    } else {
      adminPanel.style.borderColor = '#990000';
      adminPanel.style.backgroundColor = '#330000';
    }
  }

  updateTimer();
  startTimer();
  updateUserInbox();
  updateAdminInbox();

  submitKey.addEventListener('click', () => {
    if (keyInput.value.trim() === userKey) {
      alert('Key diterima! HP dibebaskan.');
      isUnlocked = true;
      timeLeft = Infinity;
      keyInput.disabled = false;
      submitKey.disabled = false;
      keyInput.value = '';
      updateTimer();
      clearInterval(timerInterval);
      timerDisplay.textContent = '∞';
      requestKeyForm.style.display = 'none';
    } else {
      alert('Key salah! Coba lagi.');
      keyInput.value = '';
    }
  });

  requestKeyForm.addEventListener('submit', (e) => {
    e.preventDefault();
    const name = requestUserName.value.trim();
    if(name === '') {
      alert('Nama harus diisi!');
      return;
    }
    const exist = adminRequests.find(r => r.name.toLowerCase() === name.toLowerCase());
    if(exist) {
      alert('Nama sudah ada dalam daftar permintaan. Harap tunggu admin membebaskan.');
      return;
    }
    const waktuPermintaan = new Date().toLocaleString();
    adminRequests.push({name: name, time: waktuPermintaan});
    alert('Permintaan key sudah terkirim ke admin.');
    requestUserName.value = '';
    updateAdminInbox();
  });

  adminAccess.addEventListener('click', () => {
    if (hasAdminAccess) {
      adminPanel.style.display = 'block';
      loadAdminInputs();
      updateRoleDisplay();
      updateAdminInbox();
      return;
    }

    let inputKey = prompt('Masukkan key admin:');
    if (inputKey === adminKey) {
      isAdmin = true;
      hasAdminAccess = true;
      loadAdminInputs();
      updateRoleDisplay();
      adminPanel.style.display = 'block';
      updateAdminInbox();
    } else {
      alert('Key admin salah!');
    }
  });

  sendMessageBtn.addEventListener('click', () => {
    const msg = adminMessageInput.value.trim();
    if (msg === '') {
      alert('Pesan tidak boleh kosong!');
      return;
    }
    userMessages.push(msg);
    adminMessageInput.value = '';
    alert('Pesan terkirim ke user.');
    updateUserInbox();
  });

  applyChanges.addEventListener('click', () => {
    let h = parseInt(timerHours.value);
    let m = parseInt(timerMinutes.value);
    let s = parseInt(timerSeconds.value);

    h = isNaN(h) || h < 0 ? 0 : h;
    m = isNaN(m) || m < 0 ? 0 : m;
    s = isNaN(s) || s < 0 ? 0 : s;

    if(h === 0 && m === 0 && s === 0) {
      alert('Timer harus diisi minimal 1 detik.');
      loadAdminInputs();
      return;
    }

    timeLeft = h * 3600 + m * 60 + s;
    isUnlocked = false;
    startTimer();
    updateTimer();

    if (userKeyInput.value.trim() !== '') {
      userKey = userKeyInput.value.trim();
    } else {
      alert('Key user tidak boleh kosong.');
      userKeyInput.value = userKey;
      return;
    }

    if (adminKeyInput.value.trim() !== '') {
      adminKey = adminKeyInput.value.trim();
    } else {
      alert('Key admin tidak boleh kosong.');
      adminKeyInput.value = adminKey;
      return;
    }

    alert('Perubahan berhasil diterapkan!');
    requestKeyForm.style.display = '';
  });

  switchRoleBtn.addEventListener('click', () => {
    isAdmin = !isAdmin;
    updateRoleDisplay();
  });

  logoutAdminBtn.addEventListener('click', () => {
    if(confirm('Yakin ingin logout dari admin?')) {
      isAdmin = false;
      hasAdminAccess = false;
      adminPanel.style.display = 'none';
      alert('Anda telah logout sebagai admin.');
    }
  });

  closeAdminBtn.addEventListener('click', () => {
    adminPanel.style.display = 'none';
  });

  // Cegah keluar / reload / shortcut hanya jika belum unlocked dan bukan admin
  window.addEventListener('beforeunload', function(e) {
    if (!isUnlocked && !isAdmin) {
      e.preventDefault();
      e.returnValue = '';
    }
  });

  document.addEventListener('keydown', function(e) {
    if (!isUnlocked && !isAdmin) {
      const active = document.activeElement;
      if (active && (active.tagName === 'INPUT' || active.tagName === 'TEXTAREA' || active.tagName === 'SELECT')) {
        return; // izinkan input keyboard normal
      }
      if (
        e.key === 'F5' || 
        e.key === 'Escape' || 
        (e.ctrlKey && (e.key.toLowerCase() === 'r' || e.key.toLowerCase() === 'w')) ||
        (e.altKey && e.key.toLowerCase() === 'f4') ||
        (e.ctrlKey && e.shiftKey && e.key.toLowerCase() === 'i')
      ) {
        e.preventDefault();
      }
    }
  });

  // This custom is made by jancokpristel
  // #######
  // #       d    #
  // #       o    #
  // #       n    #  
  // #       g    #  
  // #       o    #  
  // # ######

  document.addEventListener('contextmenu', e => {
    if (!isUnlocked && !isAdmin) {
      e.preventDefault();
    }
  });
</script>
</body>
</html>